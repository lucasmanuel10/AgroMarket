<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

      <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
        
      <script src="backend.js"></script>  
      <script src="jsFiles/navbar.js"></script>
      
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
      <link rel="stylesheet" href="https://mdbootstrap.com/docs/jquery/modals/forms/">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
      <link rel="stylesheet" href="cssFiles/navbar.css">

    <title>Início</title>
  </head>
  <body onload="loadProducts()">
    <nav class="navbar navbar-expand-lg" style="background-color: #90EE90;">
			<a class="navbar-brand" onclick="homepage()" style="cursor: pointer;"><img src="images/logo.png" height="50px"></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
		
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item">
						<a class="nav-link text-dark" onclick="homepage()" style="cursor: pointer;"><b>Início</b></a>
					</li>
				</ul>
				<div>
					<button onclick="sellItem()" id="sellId" class="btn btn-primary btn-success" role="button" style="display: none">Vender</button>
				</div>
				<div>
					<a class="notification" onclick="myShoppingCart()" style="cursor: pointer;"> 
						<img src="images/empty-car-icon.png" height="40px">
						<span id="shoppingcart" class="badge">0</span>
					</a>
				</div> 
				<div class="dropdown text-center">
					<a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<img src="images/profile_photo.jpg" height="30px" alt=""><br>
						<h7 class="text-dark">Perfil</h7>
					</a>
					<div class="dropdown-menu my-dropdown-menu">
						<a class="dropdown-item" onclick="myProfile()" style="cursor: pointer;">Meu perfil</a>
						<a class="dropdown-item" onclick="history()" style="cursor: pointer;">Histórico de compras</a>
						<hr>
						<a class="dropdown-item" href="https://lucasmanuel10.github.io/AgroMarket">Sair</a>
					</div>
				</div>     
			</div>    
    </nav>
    
    <div id="alerta" class="alert alert-danger alert-dismissable" style="visibility: hidden;" role="alert">
	</div>
    
    
    <div onload="loadProducts()" id="produtos">
	    
    </div>

    <!--
    <div class="p-3 mb-2 text-dark" id='produtos'>
			<div class="row">
				<div class="offset-md-2 col-md-8">
					<div class="bg-light row border border-success">
						<div class="col-md-4 my-3">
							<img class="w-100" src="images/peanuts.jpg" height="200px" class="mr-3" alt="Amendoins">
						</div>
						<div class="col-md-8 my-3">
							<button type="button" class="btn btn-success float-right">
								<svg width="20px" height="20px" viewBox="0 0 16 16" class="bi bi-cart-plus-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM4 14a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm7 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"/>
								</svg>
							</button>
							<h5>Amendoins</h5>
							<p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.</p>
							
							<p class="mb-0"><b>Produtor:</b> Carlos Henriques</p>
							<p class="mb-0"><b>Localização:</b> Mercado de Leiria</p>
							<p><b>Preço: </b> 10 euros</p>  
							<input type="number" id="quantity" name="quantity" value="0.2" step=0.01 min="0" max="10"> Kg
							<a class="btn btn-success float-right" href="product.html#amendoins" role="button">Ver produto</a>
						</div>
					</div>
				</div>
			</div>
    </div>
    -->
	  
	  
	<footer class="page-footer font-small blue-grey lighten-5">
		<!--<div style="background-color: #21d192;">-->
		<div style="background-color: rgba(30, 130, 76, 1)">
			<div class="container">
				<!-- Grid row-->
				<div class="row py-4 d-flex align-items-center">
					<!-- Grid column -->
					<div
						class="col-md-6 col-lg-5 text-center text-md-left mb-4 mb-md-0">
						<h6 class="mb-0">Liga-te também nas nossas redes sociais!</h6>
					</div>
					<!-- Grid column -->
					
					<!-- Grid column -->
					<div class="col-md-6 col-lg-7 text-center text-md-right">

						<!-- Facebook -->
						<a class="fb-ic"> <i class="fab fa-facebook-f white-text mr-4">
						</i>
						</a>
						<!-- Twitter -->
						<a class="tw-ic"> <i class="fab fa-twitter white-text mr-4">
						</i>
						</a>
						<!-- Google +-->
						<a class="gplus-ic"> <i
							class="fab fa-google-plus-g white-text mr-4"> </i>
						</a>
						<!--Instagram-->
						<a class="ins-ic"> <i class="fab fa-instagram white-text">
						</i>
						</a>

					</div>
				</div>
				<!-- Grid row-->
			</div>
		</div>
		<!-- Footer Links -->
		<div class="container text-center text-md-left mt-5">
			<!-- Grid row -->
			<div class="row mt-3 dark-grey-text">
				<!-- Grid column -->
				<div class="col-md-3 col-lg-4 col-xl-6 mb-4">
					<!-- Content -->
					<h6 class="text-uppercase font-weight-bold">AgroMarket</h6>
					<hr class="teal accent-3 mb-4 mt-0 d-inline-block mx-auto"
						style="width: 175px;">
					<br> <img src="images/logo.png" alt="AgroMarket"
						width="150" height="150" class="float-left mr-4">
					<br> 
					<p class="text-justify">Esta é uma ferramenta criada com o
						propósito de oferecer a todos, uma forma fácil de conhecer,
						interagir e usufruir dos produtos e mercados mais confiáveis que 
						Portugal tem para oferecer!</p>
				</div>
				<!-- Grid column -->
				<!-- Grid column -->
				<div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
					<!-- Links -->
					<h6 class="text-uppercase font-weight-bold">Links Úteis</h6>
					<hr class="teal accent-3 mb-4 mt-0 d-inline-block mx-auto"
						style="width: 120px;">
					<p>
						<a class="link text-primary" style="cursor: pointer" onclick="window.location.reload()">A
							Tua Conta </a>
					</p>
					<p>
						<a class="link text-primary" style="cursor: pointer" onclick="passEmail()">Página Inicial</a>
					</p>
					<p>
						<a class="link text-primary" style="text-decoration: none" href="https://lucasmanuel10.github.io/grupo11IPM/">Sobre Nós</a>
					</p>
				</div>
				<!-- Grid column -->
				<!-- Grid column -->
				<div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
					<!-- Links -->
					<h6 class="text-uppercase font-weight-bold">Contactos</h6>
					<hr class="teal accent-3 mb-4 mt-0 d-inline-block mx-auto"
						style="width: 125px;">
					<p>
						<i class="fas fa-home mr-3"></i> FCT NOVA, Portugal
					</p>
					<p>
						<i class="fas fa-envelope mr-3"></i> agroMarket@gmail.com
					</p>
					<p>
						<i class="fas fa-phone mr-3"></i> +351 912345678
					</p>
				</div>
				<!-- Grid column -->
			</div>
			<!-- Grid row -->
		</div>
		<!-- Footer Links -->
		<!-- Copyright -->
		<div class="footer text-center text-black-50 py-3">AgroMarket</div>
		<!-- Copyright -->
	</footer>
	  

</body>
</html>
<script>
  function loadProducts() {
    var email = window.location.hash.substr(1);
    get_products(function(products){
        var x = '';
	    console.log(products);
      for(p in products) {
          console.log(p);
          console.log(products[p].Seller);
          x += '<div class="p-3 mb-2 text-dark" id="produtos"><div class="row"><div class="offset-md-2 col-md-8"><div class="bg-light row border border-success"><div class="col-md-4 my-3"><img class="w-100 h-100" src=' + products[p].Image + ' class="mr-3"></div><div class="col-md-8 my-3"><button onclick="addItemToCart(\'' + products[p].ProductName + '\')" type="button" class="btn btn-success float-right"><svg width="20px" height="20px" viewBox="0 0 16 16" class="bi bi-cart-plus-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM4 14a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm7 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"/></svg></button><h5>' + products[p].ProductName + '</h5><p>' + products[p].Description + '</p><p class="mb-0"><b>Produtor:</b> ' + products[p].Seller + '</p><p class="mb-0"><b>Localização:</b> '+ products[p].Market +'</p><p><b>Stock:</b> '+ products[p].Stock +' kg</p><p><b>Preço/kg: </b> '+ products[p].Price +' €</p><input type="number" id="'+products[p].ProductName+' quantity" name="quantity" value="0.2" step=0.01 min="0" max="10"> Kg<a class="btn btn-success float-right" href="product.html?produto=' + products[p].ProductName +'#' + email +'" role="button">Ver produto</a></div></div></div></div></div>';
      }
      document.getElementById("produtos").innerHTML = x;
      
      loadNavbar();
    });    
  }

  function addItemToCart(item){
    console.log(item);
    var q = document.getElementById(item + " quantity").value;
    console.log(q);

    var email = window.location.hash.substr(1);
    if(q>0){
    	add_to_cart(email, item, q, function(){
      		shoppingCart(email);
    	});
    }else{
    	x = '<a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>'
    	x += '<p class="card-text">Preencha a quantidade com valores superiores a 0!</p>';
	   	document.getElementById("alerta").style.visibility = "visible"; 
   		document.getElementById("alerta").innerHTML = x;
    }
  }
	
   function passEmail(){
   var type = window.location.hash.substr(1);
   window.location.href = "https://lucasmanuel10.github.io/AgroMarket/home-page.html#" + type;
 }
</script>
